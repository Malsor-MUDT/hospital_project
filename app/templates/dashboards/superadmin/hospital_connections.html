{% extends "dashboards/superadmin/base_superadmin.html" %}

{% block content %}

<div class="space-y-6">

    <!-- Page Header -->
    <div class="flex justify-between items-center">
        <h2 class="text-2xl font-semibold text-teal-700">
            Hospital Connections
        </h2>
    </div>

    <!-- ADD CONNECTION -->
    <div class="bg-white shadow rounded-lg p-6">
        <h3 class="text-lg font-semibold text-teal-700 mb-4">
            Add New Connection
        </h3>

        <form method="POST"
              action="{{ url_for('superadmin.add_hospital_connection') }}"
              class="space-y-4">

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700">
                        Hospital From
                    </label>
                    <select name="hospital_from"
                            class="w-full border px-3 py-2 rounded"
                            required>
                        {% for h in hospitals %}
                            <option value="{{ h.hospital_id }}">
                                {{ h.name }} — {{ h.location }}
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700">
                        Hospital To
                    </label>
                    <select name="hospital_to"
                            class="w-full border px-3 py-2 rounded"
                            required>
                        {% for h in hospitals %}
                            <option value="{{ h.hospital_id }}">
                                {{ h.name }} — {{ h.location }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700">
                        Transfer Cost (€)
                    </label>
                    <input type="number" step="0.01"
                           name="transfer_cost"
                           class="w-full border px-3 py-2 rounded"
                           required>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700">
                        Latency (minutes)
                    </label>
                    <input type="number" step="1"
                           name="latency_minutes"
                           class="w-full border px-3 py-2 rounded"
                           required>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700">
                        Reliability (0–1)
                    </label>
                    <input type="number" step="0.01" min="0" max="1"
                           name="reliability"
                           class="w-full border px-3 py-2 rounded"
                           required>
                </div>
            </div>

            <button class="bg-teal-600 text-white px-4 py-2 rounded hover:bg-teal-700">
                Add Connection
            </button>
        </form>
    </div>

    <!-- CONNECTIONS TABLE -->
    <div class="bg-white shadow rounded-lg overflow-x-auto">
        <table class="w-full text-sm">
            <thead class="bg-teal-50 text-teal-700">
                <tr>
                    <th class="p-3 text-left">From</th>
                    <th class="p-3 text-left">To</th>
                    <th class="p-3 text-left">Cost (€)</th>
                    <th class="p-3 text-left">Latency</th>
                    <th class="p-3 text-left">Reliability</th>
                    <th class="p-3 text-left">Action</th>
                </tr>
            </thead>
            <tbody>
                {% for c in connections %}
                <tr class="border-t hover:bg-gray-50">
                    <td class="p-3">
                        {{ c.from_hospital.name }}
                    </td>

                    <td class="p-3">
                        {{ c.to_hospital.name }}
                    </td>
                    <td class="p-3">{{ c.transfer_cost }}</td>
                    <td class="p-3">{{ c.latency_minutes }}</td>
                    <td class="p-3">{{ c.reliability }}</td>
                    <td class="p-3">
                        <form method="POST"
                              action="{{ url_for('superadmin.delete_hospital_connection',
                                                 connection_id=c.connection_id) }}">
                            <button class="text-red-600 hover:underline">
                                Delete
                            </button>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="6" class="p-4 text-center text-gray-500">
                        No connections configured yet
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>

{% endblock %}
